<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Votação de Rappers</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .rapper-card {
            border: 1px solid #ccc;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
        }
        .voting-options label {
            display: block;
            margin: 10px 0 5px;
        }
        .voting-options input[type="number"] {
            width: 60px;
            padding: 5px;
        }
        .recent-battles select {
            padding: 5px;
            margin-right: 10px;
        }
        button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .resultado {
            margin-top: 20px;
            font-size: 1.2em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Votação de Rappers</h1>
    <form id="votacaoForm">
        <!-- 3ma -->
        <div class="rapper-card" id="3ma">
            <h2>3ma</h2>
            <div class="voting-options">
                <label for="3ma_consistencia">Consistência (1-10):</label>
                <input type="number" id="3ma_consistencia" min="1" max="10" required>
                <label for="3ma_material">Material (1-10):</label>
                <input type="number" id="3ma_material" min="1" max="10" required>
                <label for="3ma_performance">Performance (1-10):</label>
                <input type="number" id="3ma_performance" min="1" max="10" required>
                <label for="3ma_adversarios">Adversários (1-10):</label>
                <input type="number" id="3ma_adversarios" min="1" max="10" required>
                <label for="3ma_impacto">Impacto (1-10):</label>
                <input type="number" id="3ma_impacto" min="1" max="10" required>
                <label for="3ma_confronto">Confronto Direto (1-10):</label>
                <input type="number" id="3ma_confronto" min="1" max="10" required>
            </div>
            <div class="recent-battles">
                <h3>Batalhas Recentes</h3>
                <ul>
                    <!-- Sem batalhas recentes -->
                </ul>
            </div>
        </div>

        <!-- Abismal -->
        <div class="rapper-card" id="abismal">
            <h2>Abismal</h2>
            <div class="voting-options">
                <label for="abismal_consistencia">Consistência (1-10):</label>
                <input type="number" id="abismal_consistencia" min="1" max="10" required>
                <label for="abismal_material">Material (1-10):</label>
                <input type="number" id="abismal_material" min="1" max="10" required>
                <label for="abismal_performance">Performance (1-10):</label>
                <input type="number" id="abismal_performance" min="1" max="10" required>
                <label for="abismal_adversarios">Adversários (1-10):</label>
                <input type="number" id="abismal_adversarios" min="1" max="10" required>
                <label for="abismal_impacto">Impacto (1-10):</label>
                <input type="number" id="abismal_impacto" min="1" max="10" required>
                <label for="abismal_confronto">Confronto Direto (1-10):</label>
                <input type="number" id="abismal_confronto" min="1" max="10" required>
            </div>
            <div class="recent-battles">
                <h3>Batalhas Recentes</h3>
                <ul>
                    <li>RealPunch
                        <select name="abismal_realpunch_result">
                            <option value="vitoria">Vitória</option>
                            <option value="empate">Empate</option>
                            <option value="derrota">Derrota</option>
                        </select>
                        <select name="abismal_realpunch_status">
                            <option value="neutro">Neutro</option>
                            <option value="underdog">Underdog</option>
                            <option value="favorite">Favorite</option>
                        </select>
                    </li>
                    <li>WilsonG
                        <select name="abismal_wilsong_result">
                            <option value="vitoria">Vitória</option>
                            <option value="empate">Empate</option>
                            <option value="derrota">Derrota</option>
                        </select>
                        <select name="abismal_wilsong_status">
                            <option value="neutro">Neutro</option>
                            <option value="underdog">Underdog</option>
                            <option value="favorite">Favorite</option>
                        </select>
                    </li>
                </ul>
            </div>
        </div>

        <!-- AM -->
        <div class="rapper-card" id="am">
            <h2>AM</h2>
            <div class="voting-options">
                <label for="am_consistencia">Consistência (1-10):</label>
                <input type="number" id="am_consistencia" min="1" max="10" required>
                <label for="am_material">Material (1-10):</label>
                <input type="number" id="am_material" min="1" max="10" required>
                <label for="am_performance">Performance (1-10):</label>
                <input type="number" id="am_performance" min="1" max="10" required>
                <label for="am_adversarios">Adversários (1-10):</label>
                <input type="number" id="am_adversarios" min="1" max="10" required>
                <label for="am_impacto">Impacto (1-10):</label>
                <input type="number" id="am_impacto" min="1" max="10" required>
                <label for="am_confronto">Confronto Direto (1-10):</label>
                <input type="number" id="am_confronto" min="1" max="10" required>
            </div>
            <div class="recent-battles">
                <h3>Batalhas Recentes</h3>
                <ul>
                    <li>Vazto
                        <select name="am_vazto_result">
                            <option value="vitoria">Vitória</option>
                            <option value="empate">Empate</option>
                            <option value="derrota">Derrota</option>
                        </select>
                        <select name="am_vazto_status">
                            <option value="neutro">Neutro</option>
                            <option value="underdog">Underdog</option>
                            <option value="favorite">Favorite</option>
                        </select>
                    </li>
                    <li>Za
                        <select name="am_za_result">
                            <option value="vitoria">Vitória</option>
                            <option value="empate">Empate</option>
                            <option value="derrota">Derrota</option>
                        </select>
                        <select name="am_za_status">
                            <option value="neutro">Neutro</option>
                            <option value="underdog">Underdog</option>
                            <option value="favorite">Favorite</option>
                        </select>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Adicione mais rappers aqui -->

        <button type="submit">Calcular Pontuação</button>
    </form>

    <div class="resultado">
        <h2>Resultado</h2>
        <p id="resultado"></p>
    </div>

    <script>
        const pesos = {
            consistencia: 0.30,
            material: 0.25,
            performance: 0.20,
            adversarios: 0.15,
            impacto: 0.05,
            confronto: 0.05
        };

        const statusBatalha = {
            underdog: { vitoria: 2, derrota: -0.5, empate: 1 },
            favorite: { vitoria: 1, derrota: -2, empate: 0.5 },
            neutro: { vitoria: 1.5, derrota: -1.5, empate: 0.75 }
        };

        document.getElementById('votacaoForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const rappers = [
                { name: "3ma", batalhas: [] },
                { name: "abismal", batalhas: ["realpunch", "wilsong"] },
                { name: "am", batalhas: ["vazto", "za"] }
                // Adicione mais rappers aqui
            ];

            let resultados = [];

            rappers.forEach(rapper => {
                // Coleta as notas dos critérios
                const notas = {
                    consistencia: parseFloat(document.getElementById(`${rapper.name}_consistencia`).value),
                    material: parseFloat(document.getElementById(`${rapper.name}_material`).value),
                    performance: parseFloat(document.getElementById(`${rapper.name}_performance`).value),
                    adversarios: parseFloat(document.getElementById(`${rapper.name}_adversarios`).value),
                    impacto: parseFloat(document.getElementById(`${rapper.name}_impacto`).value),
                    confronto: parseFloat(document.getElementById(`${rapper.name}_confronto`).value)
                };

                // Calcula a média ponderada
                const mediaPonderada = Object.keys(notas).reduce((total, criterio) => {
                    return total + (notas[criterio] * pesos[criterio]);
                }, 0);

                // Coleta os resultados das batalhas
                let pontuacaoBatalhas = 0;
                rapper.batalhas.forEach(batalha => {
                    const resultado = document.querySelector(`select[name="${rapper.name}_${batalha}_result"]`).value;
                    const status = document.querySelector(`select[name="${rapper.name}_${batalha}_status"]`).value;

                    pontuacaoBatalhas += statusBatalha[status][resultado];
                });

                // Pontuação final
                const pontuacaoFinal = mediaPonderada + pontuacaoBatalhas;
                resultados.push({ name: rapper.name, pontuacao: pontuacaoFinal });
            });

            // Exibe os resultados
            let resultadoTexto = resultados.map(r => `${r.name}: ${r.pontuacao.toFixed(2)}`).join('<br>');
            document.getElementById('resultado').innerHTML = resultadoTexto;
        });
    </script>
</body>
</html>
